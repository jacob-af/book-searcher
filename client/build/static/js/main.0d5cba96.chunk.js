(this.webpackJsonpmern=this.webpackJsonpmern||[]).push([[0],{29:function(e,t,a){e.exports=a(60)},34:function(e,t,a){},35:function(e,t,a){},60:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(26),c=a.n(r),o=(a(34),a(8)),s=a(1),i=(a(35),a(11)),m=a(27),u=a(10),v=a.n(u),f={searchBooks:function(e){return v.a.get("https://www.googleapis.com/books/v1/volumes?q=".concat(e,"&key=").concat("AIzaSyDWKDcvv-xwsjSCCWyfQJptrB5iznXYNJQ"))},saveBook:function(e){return v.a.post("/api/books",e)},getBooks:function(){return v.a.get("/api/books")},deleteBook:function(e){return v.a.delete("/api/books/"+e)}},d=function(e){var t=e.setResults,a=Object(n.useRef)();return l.a.createElement("form",{id:"form",action:""},l.a.createElement("h5",{className:"text-left"},"Book Search"),l.a.createElement("div",null,l.a.createElement("p",{className:"text-left"},"book"),l.a.createElement("input",{id:"input",autoComplete:"off",ref:a})),l.a.createElement("div",{className:"d-flex justify-content-end mt-3"},l.a.createElement("button",{className:"btn btn-outline-dark btn-sm",onClick:function(e){e.preventDefault(),f.searchBooks(a.current.value).then((function(e){var a,n=Object(m.a)(e.data.items);try{for(n.s();!(a=n.n()).done;){var l=a.value;console.log(l.hasOwnProperty("volumeInfo"),l.volumeInfo),l.volumeInfo.imageLinks?l.thumbnail=l.volumeInfo.imageLinks.thumbnail:l.thumbnail="https://via.placeholder.com/128x192.png"}}catch(r){n.e(r)}finally{n.f()}t(e.data.items)})).catch((function(e){alert("Search error, please try again")}))}},"Search")))},E=function(e){var t=e.result,a=t.thumbnail,n=t.volumeInfo,r=n.title,c=n.subtitle,o=n.authors,s=n.description,i=n.previewLink;return l.a.createElement("div",{className:"result p-4"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-10"},l.a.createElement("h2",{className:"text-left"},r),l.a.createElement("h5",{className:"text-left"},c),l.a.createElement("h4",{className:"text-left"},o?o.map((function(e){return l.a.createElement("span",{key:e},e)})):l.a.createElement("div",null))),l.a.createElement("div",{className:"col-2"},l.a.createElement("a",{className:"btn btn-outline-dark btn-sm mr-2",href:i,target:"_blank",rel:"noopener noreferrer"},"Preview"),l.a.createElement("button",{className:"btn btn-outline-dark btn-sm",onClick:function(e){e.preventDefault();var t={title:r,subtitle:c,authors:o,description:s,previewLink:i,thumbnail:a};f.saveBook(t)}},"Save"))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-2"},l.a.createElement("img",{src:a||"",alt:"book cover"})),l.a.createElement("div",{className:"col-10"},l.a.createElement("p",null,s))))},h=function(e){var t=e.results;return l.a.createElement("div",{className:"result"},l.a.createElement("p",{className:"text-left ml-3"},"Results"),t?t.map((function(e){return l.a.createElement(E,{result:e,key:e.volumeInfo.previewLink})})):l.a.createElement("div",{className:"result"},"No Results to Display"))},b=function(){var e=Object(n.useState)(),t=Object(i.a)(e,2),a=t[0],r=t[1];return l.a.createElement("div",null,l.a.createElement(d,{setResults:r}),l.a.createElement(h,{results:a}))},p=function(e){var t=e.deleteBook,a=e.book,n=a.title,r=a.subtitle,c=a.authors,o=a.description,s=a.previewLink,i=a.thumbnail,m=a._id;return l.a.createElement("div",{className:"savedBooks p-4"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-10"},l.a.createElement("h2",{className:"text-left"},n),l.a.createElement("h5",{className:"text-left"},r),l.a.createElement("h4",{className:"text-left"},c?c.map((function(e){return l.a.createElement("span",{key:e},e)})):l.a.createElement("div",null,"!"))),l.a.createElement("div",{className:"col-2"},l.a.createElement("a",{className:"btn btn-outline-dark btn-sm mr-2",href:s,target:"_blank",rel:"noopener noreferrer"},"Preview"),l.a.createElement("button",{className:"btn btn-outline-dark btn-sm",onClick:function(){return t(m)}},"Delete"))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-2"},l.a.createElement("img",{src:i||"",alt:"book cover"})),l.a.createElement("div",{className:"col-10"},l.a.createElement("p",null,o))))},k=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],r=t[1],c=function(e){console.log(e),r(a.filter((function(t){return t._id!==e}))),f.deleteBook(e)};return Object(n.useEffect)((function(){f.getBooks().then((function(e){r(e.data)}))}),[]),l.a.createElement("div",{className:"result"},l.a.createElement("p",{className:"text-left ml-3"},"Saved Books"),a[0]?a.map((function(e){return l.a.createElement(p,{book:e,deleteBook:c,key:e.id})})):l.a.createElement("div",{className:"result"},l.a.createElement("p",null,"No saved Books")))};var N=function(){return l.a.createElement("div",null,l.a.createElement("p",null,"No Match"))},g=function(){return l.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light"},l.a.createElement("div",{className:"container-fluid"},l.a.createElement(o.b,{className:"navbar-brand",to:"/"},"Google Book Search"),l.a.createElement("ul",{className:"navbar-nav me-auto mb-2 mb-lg-0"},l.a.createElement("li",{className:"nav-item"},l.a.createElement(o.b,{className:"nav-link ","aria-current":"page",to:"/"},"Search")),l.a.createElement("li",{className:"nav-item"},l.a.createElement(o.b,{className:"nav-link",to:"/saved"},"Saved")))))},w=function(){return l.a.createElement("div",{className:"header"},l.a.createElement("h1",null,"(React) Google Book Search"),l.a.createElement("h5",null,"Search for and Save Books of Interest"))};var B=function(){return l.a.createElement(o.a,null,l.a.createElement("div",{className:"app"},l.a.createElement(g,null),l.a.createElement("div",{className:"container"},l.a.createElement(w,null),l.a.createElement(s.c,null,l.a.createElement(s.a,{exact:!0,path:["/","/search"]},l.a.createElement(b,null)),l.a.createElement(s.a,{exact:!0,path:"/saved"},l.a.createElement(k,null)),l.a.createElement(s.a,null,l.a.createElement(N,null))))))},x=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function y(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}a(59);c.a.render(l.a.createElement(B,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("","/service-worker.js");x?function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):y(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e):y(e)}))}}()}},[[29,1,2]]]);
//# sourceMappingURL=main.0d5cba96.chunk.js.map